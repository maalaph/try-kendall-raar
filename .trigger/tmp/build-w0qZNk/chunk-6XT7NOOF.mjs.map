{
  "version": 3,
  "sources": ["../../../trigger/scheduled-tasks.ts"],
  "sourcesContent": ["/**\n * Trigger.dev Scheduled Tasks\n * Periodic tasks for learning and consolidation\n */\n\nimport { schedules } from \"@trigger.dev/sdk/v3\";\nimport { consolidateMemoriesTask, updatePatternConfidenceTask } from \"./learning-loops\";\nimport { backfillUserEmbeddingsTask } from \"./embedding-tasks\";\nimport { getUserRecord } from \"@/lib/database\";\n\n/**\n * Daily pattern analysis task\n * Runs every day at 2 AM UTC to analyze patterns and update confidence scores\n */\nexport const dailyPatternAnalysis = schedules.create({\n  id: \"daily-pattern-analysis\",\n  cron: \"0 2 * * *\", // 2 AM UTC daily\n  task: async (payload, { ctx }) => {\n    console.log('[TRIGGER] Daily pattern analysis started');\n    \n    // Note: In a real implementation, you'd fetch all users\n    // For now, this is a placeholder that can be triggered manually\n    // or extended to iterate over all users\n    \n    return {\n      success: true,\n      message: \"Daily pattern analysis scheduled (implement user iteration)\",\n    };\n  },\n});\n\n/**\n * Weekly memory consolidation task\n * Runs every Monday at 3 AM UTC to consolidate and clean up memories\n */\nexport const weeklyMemoryConsolidation = schedules.create({\n  id: \"weekly-memory-consolidation\",\n  cron: \"0 3 * * 1\", // 3 AM UTC every Monday\n  task: async (payload, { ctx }) => {\n    console.log('[TRIGGER] Weekly memory consolidation started');\n    \n    // Note: In a real implementation, you'd fetch all users\n    // For now, this is a placeholder\n    \n    return {\n      success: true,\n      message: \"Weekly memory consolidation scheduled (implement user iteration)\",\n    };\n  },\n});\n\n/**\n * Periodic embedding backfill task\n * Runs every Sunday at 4 AM UTC to backfill embeddings for users\n */\nexport const periodicEmbeddingBackfill = schedules.create({\n  id: \"periodic-embedding-backfill\",\n  cron: \"0 4 * * 0\", // 4 AM UTC every Sunday\n  task: async (payload, { ctx }) => {\n    console.log('[TRIGGER] Periodic embedding backfill started');\n    \n    // Note: In a real implementation, you'd fetch all users\n    // For now, this is a placeholder\n    \n    return {\n      success: true,\n      message: \"Periodic embedding backfill scheduled (implement user iteration)\",\n    };\n  },\n});\n\n// Note: schedules.createTask() doesn't exist in v4 API\n// These tasks can be called directly from other tasks or via the task registry\n// For now, we'll export the tasks themselves which can be invoked directly\n\n"],
  "mappings": ";;;;;;;;;AAAA;AAcO,IAAM,uBAAuB,kBAAU,OAAO;AAAA,EACnD,IAAI;AAAA,EACJ,MAAM;AAAA;AAAA,EACN,MAAM,8BAAO,SAAS,EAAE,IAAI,MAAM;AAChC,YAAQ,IAAI,0CAA0C;AAMtD,WAAO;AAAA,MACL,SAAS;AAAA,MACT,SAAS;AAAA,IACX;AAAA,EACF,GAXM;AAYR,CAAC;AAMM,IAAM,4BAA4B,kBAAU,OAAO;AAAA,EACxD,IAAI;AAAA,EACJ,MAAM;AAAA;AAAA,EACN,MAAM,8BAAO,SAAS,EAAE,IAAI,MAAM;AAChC,YAAQ,IAAI,+CAA+C;AAK3D,WAAO;AAAA,MACL,SAAS;AAAA,MACT,SAAS;AAAA,IACX;AAAA,EACF,GAVM;AAWR,CAAC;AAMM,IAAM,4BAA4B,kBAAU,OAAO;AAAA,EACxD,IAAI;AAAA,EACJ,MAAM;AAAA;AAAA,EACN,MAAM,8BAAO,SAAS,EAAE,IAAI,MAAM;AAChC,YAAQ,IAAI,+CAA+C;AAK3D,WAAO;AAAA,MACL,SAAS;AAAA,MACT,SAAS;AAAA,IACX;AAAA,EACF,GAVM;AAWR,CAAC;",
  "names": []
}
